<!-- social feed -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“¸ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª | Boughaba Kids</title>
  <link rel="stylesheet" href="../style.css">
  <script defer src="../main.js"></script>
</head>
<body>
  <header class="topbar">
    <h1><span class="boughaba">Boughaba</span> <span class="kids">Kids</span></h1>
    <a href="../index.html" class="back-btn">ğŸ </a>
  </header>

  <main>
    <h2>ğŸ“¸ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª</h2>
    <p>Ø´Ø§Ø±Ùƒ ØµÙˆØ±ÙƒØŒ Ø±Ø³ÙˆÙ…Ø§ØªÙƒØŒ Ø£ÙÙƒØ§Ø±Ùƒ Ø£Ùˆ Ø­ØªÙ‰ Ø£Ù„Ø¹Ø§Ø¨Ùƒ!</p>

    <div id="share-form">
      <textarea id="postText" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ´Ø§Ø±ÙƒØŸ"></textarea>
      <input type="url" id="postImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <button id="postBtn">Ù†Ø´Ø±</button>
    </div>

    <section id="feed"></section>
  </main>

  <footer>
    <small>Â© 2025 Boughaba Kids</small>
  </footer>

  <script>
    const postBtn = document.getElementById("postBtn");
    const postText = document.getElementById("postText");
    const postImage = document.getElementById("postImage");
    const feed = document.getElementById("feed");

    let posts = JSON.parse(localStorage.getItem("posts") || "[]");

    function renderFeed() {
      if (!posts.length) {
        feed.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø¨Ø¹Ø¯.</p>";
        return;
      }
      feed.innerHTML = posts
        .map(
          (p) => `
        <div class="post">
          <div class="post-header">${p.user || "Ù…Ø¬Ù‡ÙˆÙ„"} ğŸ§’</div>
          <p>${p.text}</p>
          ${p.img ? `<img src="${p.img}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©">` : ""}
          <div class="post-time">${p.time}</div>
        </div>`
        )
        .reverse()
        .join("");
    }

    postBtn.onclick = () => {
      const text = postText.value.trim();
      const img = postImage.value.trim();
      if (!text) return alert("Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©!");

      const user = JSON.parse(localStorage.getItem("user") || "{}");
      const name = user.name || "Ø·Ø§Ù„Ø¨ Ù…Ø¬Ù‡ÙˆÙ„";

      const newPost = {
        user: name,
        text,
        img,
        time: new Date().toLocaleString("ar-DZ")
      };

      posts.push(newPost);
      localStorage.setItem("posts", JSON.stringify(posts));
      postText.value = "";
      postImage.value = "";
      renderFeed();
    };

    document.addEventListener("DOMContentLoaded", renderFeed);
  </script>
</body>
</html>
